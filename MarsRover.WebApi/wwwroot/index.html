<!doctype html>

<html lang="en">

<head>
    <meta charset="utf-8">
    <h1>Mars Rover</h1>
</head>
<body>
    <h3>Upload Date File:</h3>
    <form id="form-file">
        
        <input id="file" type="file" name="file" accept="txt" />
        <input type="submit" name="btn-file" value="Upload file" />
    </form>
    <script>
        // TODO: Move to js file, and structure

        //Begin Upload Date File
        let formData = new FormData();
        const inputFile = document.getElementById('file');
        inputFile.addEventListener('change', e => formData.append('file', e.currentTarget.files[0]));
        const form = document.getElementById('form-file');
        form.addEventListener('submit', e => {
            e.preventDefault();
            e.stopPropagation();
            const request = new XMLHttpRequest();
            request.open("POST", "https://localhost:5001/api/v1/file");
            request.onload = () => console.log(JSON.parse(request.responseText)); // callback, lets do something with the response
            request.send(formData);
        });

        //End Upload Date File
    </script>
</body>

</html>